<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en">
    <head>
        <title>Hyphenator.js &ndash; pattern compressor</title>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <style type="text/css">
            body {
                width:50%;
                margin-left:25%;
                margin-right:25%;
            }
            .text {
                text-align:justify;
            }
            .test {
            	background-color: #ffd6d6;
            }
            .ref {
            	background-color: #d6ffd6;
            }
            pre {border: 1px dotted grey;}
        </style>
        <script type="text/javascript">
        	var oldpatterns, newpatterns = {};
        	
        	function lengthSort(a, b) {
        		return a.length - b.length;
        	}
        	        	
			function startConversion() {
				var len, i, curlen;
				oldpatterns = document.getElementsByName('oldpattern')[0].value.split(' ');
				oldpatterns.sort(lengthSort);
				len = oldpatterns.length;
				for(i = 0; i < len; i++) {
					curlen = oldpatterns[i].length;
					if(curlen in newpatterns) {
						newpatterns[curlen] += oldpatterns[i];
					} else {
						newpatterns[curlen] = oldpatterns[i];
					}
				}
				output2String();
			}
			
			function output2String() {
				var tmp = '{', len;
				for (len in newpatterns) {
					tmp += len + ':' + '"' + newpatterns[len] + '",';
				}
				tmp += '}'
				document.getElementsByName('newpattern')[0].value = tmp;
			}
			
        </script>
    </head>
    <body>
        <h1>Compresses the pattern</h1>
		<form action="#" method="post">
			<fieldset>
				<label>Paste patterns:</label>
				<textarea name="oldpattern" cols="80" rows="20"></textarea> 
				<input type="submit" value="Convert!" onclick="startConversion(); return false;"><input type="Reset" value="Reset">
			</fieldset>
			<fieldset>
				<label>Copy patterns:</label>
				<textarea name="newpattern" cols="80" rows="20"></textarea> 
			</fieldset>
		</form>
    </body>
</html>